function e(e){return null===e?"null":e!==Object(e)?typeof e:({}).toString.call(e).slice(8,-1).toLowerCase()}function t(t){return"string"!==e(t)||!t.length}function n(e="",r,i){if(t(e))return!1;let a=e.charCodeAt(0);return r<=a&&a<=i}const r={HIRAGANA:"toHiragana",KATAKANA:"toKatakana"},i="hepburn",a={useObsoleteKana:!1,passRomaji:!1,upcaseKatakana:!1,IMEMode:!1,convertLongVowelMark:!0,romanization:i},o=[65377,65381],u=[[12352,12447],[12448,12543],o,[65382,65439],[12288,12351],o,[12539,12540],[65281,65295],[65306,65311],[65339,65343],[65371,65376],[65504,65518],[65313,65338],[65345,65370],[65296,65305],[19968,40959],[13312,19903]];function s(r="",i){let a="regexp"===e(i);return!t(r)&&[...r].every(e=>{let t=function(e=""){return u.some(([t,r])=>n(e,t,r))}(e);return a?t||i.test(e):t})}var c=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function l(e,t){if(e.length!==t.length)return!1;for(var n,r,i=0;i<e.length;i++)if(!((n=e[i])===(r=t[i])||c(n)&&c(r)))return!1;return!0}function f(e,t){void 0===t&&(t=l);var n=null;function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var a=e.apply(this,r);return n={lastResult:a,lastArgs:r,lastThis:this},a}return r.clear=function(){n=null},r}var d=Object.prototype.hasOwnProperty;function y(e,t,n){for(n of e.keys())if(g(n,t))return n}function g(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&g(e[r],t[r]););return -1===r}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if((i=r)&&"object"==typeof i&&!(i=y(t,i))||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if((i=r[0])&&"object"==typeof i&&!(i=y(t,i))||!g(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return -1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return -1===r}if(!n||"object"==typeof e){for(n in r=0,e)if(d.call(e,n)&&++r&&!d.call(t,n)||!(n in t)||!g(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!=e&&t!=t}const p=(e={})=>Object.assign({},a,e);function m(t){return Object.entries(t).reduce((t,[n,r])=>{let i="string"===e(r);return t[n]=i?{"":r}:m(r),t},{})}function h(e,t){return t.split("").reduce((e,t)=>(void 0===e[t]&&(e[t]={}),e[t]),e)}function v(t={}){let n={};return"object"===e(t)&&Object.entries(t).forEach(([e,t])=>{let r=n;e.split("").forEach(e=>{void 0===r[e]&&(r[e]={}),r=r[e]}),r[""]=t}),function(t){return function t(n,r){return void 0===n||"string"===e(n)?r:Object.entries(r).reduce((e,[r,i])=>(e[r]=t(n[r],i),e),n)}(JSON.parse(JSON.stringify(t)),n)}}function b(t,n){return n?"function"===e(n)?n(t):v(n)(t):t}const j={a:"あ",i:"い",u:"う",e:"え",o:"お",k:{a:"か",i:"き",u:"く",e:"け",o:"こ"},s:{a:"さ",i:"し",u:"す",e:"せ",o:"そ"},t:{a:"た",i:"ち",u:"つ",e:"て",o:"と"},n:{a:"な",i:"に",u:"ぬ",e:"ね",o:"の"},h:{a:"は",i:"ひ",u:"ふ",e:"へ",o:"ほ"},m:{a:"ま",i:"み",u:"む",e:"め",o:"も"},y:{a:"や",u:"ゆ",o:"よ"},r:{a:"ら",i:"り",u:"る",e:"れ",o:"ろ"},w:{a:"わ",i:"ゐ",e:"ゑ",o:"を"},g:{a:"が",i:"ぎ",u:"ぐ",e:"げ",o:"ご"},z:{a:"ざ",i:"じ",u:"ず",e:"ぜ",o:"ぞ"},d:{a:"だ",i:"ぢ",u:"づ",e:"で",o:"ど"},b:{a:"ば",i:"び",u:"ぶ",e:"べ",o:"ぼ"},p:{a:"ぱ",i:"ぴ",u:"ぷ",e:"ぺ",o:"ぽ"},v:{a:"ゔぁ",i:"ゔぃ",u:"ゔ",e:"ゔぇ",o:"ゔぉ"}},k={".":"。",",":"、",":":"：","/":"・","!":"！","?":"？","~":"〜","-":"ー","‘":"「","’":"」","“":"『","”":"』","[":"［","]":"］","(":"（",")":"）","{":"｛","}":"｝"},E={k:"き",s:"し",t:"ち",n:"に",h:"ひ",m:"み",r:"り",g:"ぎ",z:"じ",d:"ぢ",b:"び",p:"ぴ",v:"ゔ",q:"く",f:"ふ"},w={ya:"ゃ",yi:"ぃ",yu:"ゅ",ye:"ぇ",yo:"ょ"},I={a:"ぁ",i:"ぃ",u:"ぅ",e:"ぇ",o:"ぉ"},S={sh:"sy",ch:"ty",cy:"ty",chy:"ty",shy:"sy",j:"zy",jy:"zy",shi:"si",chi:"ti",tsu:"tu",ji:"zi",fu:"hu"},O=Object.assign({tu:"っ",wa:"ゎ",ka:"ヵ",ke:"ヶ"},I,w),C={yi:"い",wu:"う",ye:"いぇ",wi:"うぃ",we:"うぇ",kwa:"くぁ",whu:"う",tha:"てゃ",thu:"てゅ",tho:"てょ",dha:"でゃ",dhu:"でゅ",dho:"でょ"},x={wh:"う",kw:"く",qw:"く",q:"く",gw:"ぐ",sw:"す",ts:"つ",th:"て",tw:"と",dh:"で",dw:"ど",fw:"ふ",f:"ふ"};let B=null;const A=v({wi:"ゐ",we:"ゑ"});function N(e=""){return!t(e)&&n(e,65,90)}function L(e=""){return!t(e)&&12540===e.charCodeAt(0)}const $=f((e,t,n)=>{let r=(null==B&&(B=function(){let e=m(j),t=t=>h(e,t);return Object.entries(E).forEach(([e,n])=>{Object.entries(w).forEach(([r,i])=>{t(e+r)[""]=n+i})}),Object.entries(k).forEach(([e,n])=>{t(e)[""]=n}),Object.entries(x).forEach(([e,n])=>{Object.entries(I).forEach(([r,i])=>{t(e+r)[""]=n+i})}),["n","n'","xn"].forEach(e=>{t(e)[""]="ん"}),e.c=JSON.parse(JSON.stringify(e.k)),Object.entries(S).forEach(([e,n])=>{let r=e.slice(0,e.length-1),i=e.charAt(e.length-1);t(r)[i]=JSON.parse(JSON.stringify(t(n)))}),Object.entries(O).forEach(([e,n])=>{let r=e=>e.charAt(e.length-1),i=e=>e.slice(0,e.length-1),a=t(`x${e}`);a[""]=n,t(`l${i(e)}`)[r(e)]=a,[...Object.entries(S),["c","k"]].reduce((t,[n,r])=>e.startsWith(r)?t.concat(e.replace(r,n)):t,[]).forEach(n=>{["l","x"].forEach(a=>{t(a+i(n))[r(n)]=t(a+e)})})}),Object.entries(C).forEach(([e,n])=>{t(e)[""]=n}),[...Object.keys(E),"c","y","w","j"].forEach(t=>{let n=e[t];n[t]=function e(t){return Object.entries(t).reduce((t,[n,r])=>(n?t[n]=e(r):t[n]=`\u{3063}${r}`,t),{})}(n)}),delete e.n.n,Object.freeze(JSON.parse(JSON.stringify(e)))}()),B);return r=e?function(e){let t=JSON.parse(JSON.stringify(e));return t.n.n={"":"ん"},t.n[" "]={"":"ん"},t}(r):r,r=t?A(r):r,n&&(r=b(r,n)),r},g);let J=[];function D({type:e,target:t,data:n}){/Mac/.test(window.navigator&&window.navigator.platform)&&("compositionupdate"===e&&s(n)&&(t.dataset.ignoreComposition="true"),"compositionend"===e&&(t.dataset.ignoreComposition="false"))}function T(e={},t=e=>!!e){let n=[],{length:r}=e,i=0;for(;i<r&&t(e[i],i);)n.push(e[i]),i+=1;return[n.join(""),e.slice(i)]}const M={input:({target:{value:e,selectionStart:t,selectionEnd:n}})=>console.log("input:",{value:e,selectionStart:t,selectionEnd:n}),compositionstart:()=>console.log("compositionstart"),compositionupdate:({target:{value:e,selectionStart:t,selectionEnd:n},data:r})=>console.log("compositionupdate",{data:r,value:e,selectionStart:t,selectionEnd:n}),compositionend:()=>console.log("compositionend")},q=e=>{Object.entries(M).forEach(([t,n])=>e.addEventListener(t,n))},R=["TEXTAREA","INPUT"];let P=0;const z=()=>(P+=1,`${Date.now()}${P}`);let W=null;const F={あ:"a",い:"i",う:"u",え:"e",お:"o",か:"ka",き:"ki",く:"ku",け:"ke",こ:"ko",さ:"sa",し:"shi",す:"su",せ:"se",そ:"so",た:"ta",ち:"chi",つ:"tsu",て:"te",と:"to",な:"na",に:"ni",ぬ:"nu",ね:"ne",の:"no",は:"ha",ひ:"hi",ふ:"fu",へ:"he",ほ:"ho",ま:"ma",み:"mi",む:"mu",め:"me",も:"mo",ら:"ra",り:"ri",る:"ru",れ:"re",ろ:"ro",や:"ya",ゆ:"yu",よ:"yo",わ:"wa",ゐ:"wi",ゑ:"we",を:"wo",ん:"n",が:"ga",ぎ:"gi",ぐ:"gu",げ:"ge",ご:"go",ざ:"za",じ:"ji",ず:"zu",ぜ:"ze",ぞ:"zo",だ:"da",ぢ:"ji",づ:"zu",で:"de",ど:"do",ば:"ba",び:"bi",ぶ:"bu",べ:"be",ぼ:"bo",ぱ:"pa",ぴ:"pi",ぷ:"pu",ぺ:"pe",ぽ:"po",ゔぁ:"va",ゔぃ:"vi",ゔ:"vu",ゔぇ:"ve",ゔぉ:"vo"},K={"。":".","、":",","：":":","・":"/","！":"!","？":"?","〜":"~",ー:"-","「":"‘","」":"’","『":"“","』":"”","［":"[","］":"]","（":"(","）":")","｛":"{","｝":"}","　":" "},V=["あ","い","う","え","お","や","ゆ","よ"],U={ゃ:"ya",ゅ:"yu",ょ:"yo"},H={ぃ:"yi",ぇ:"ye"},G={ぁ:"a",ぃ:"i",ぅ:"u",ぇ:"e",ぉ:"o"},Q=["き","に","ひ","み","り","ぎ","び","ぴ","ゔ","く","ふ"],X={し:"sh",ち:"ch",じ:"j",ぢ:"j"},_={っ:"",ゃ:"ya",ゅ:"yu",ょ:"yo",ぁ:"a",ぃ:"i",ぅ:"u",ぇ:"e",ぉ:"o"},Y={b:"b",c:"t",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",m:"m",p:"p",q:"q",r:"r",s:"s",t:"t",v:"v",w:"w",x:"x",z:"z"};f((e,t)=>{let n=e===i?(null==W&&(W=function(){let e=m(F),t=t=>h(e,t),n=(e,n)=>{t(e)[""]=n};return Object.entries(K).forEach(([e,n])=>{t(e)[""]=n}),[...Object.entries(U),...Object.entries(G)].forEach(([e,t])=>{n(e,t)}),Q.forEach(e=>{let r=t(e)[""][0];Object.entries(U).forEach(([t,i])=>{n(e+t,r+i)}),Object.entries(H).forEach(([t,i])=>{n(e+t,r+i)})}),Object.entries(X).forEach(([e,t])=>{Object.entries(U).forEach(([r,i])=>{n(e+r,t+i[1])}),n(`${e}\u{3043}`,`${t}yi`),n(`${e}\u{3047}`,`${t}e`)}),e["っ"]=function e(t){return Object.entries(t).reduce((t,[n,r])=>{if(n)t[n]=e(r);else{let e=r.charAt(0);t[n]=Object.keys(Y).includes(e)?Y[e]+r:r}return t},{})}(e),Object.entries(_).forEach(([e,t])=>{n(e,t)}),V.forEach(e=>{n(`\u{3093}${e}`,`n'${t(e)[""]}`)}),Object.freeze(JSON.parse(JSON.stringify(e)))}()),W):{};return t&&(n=b(n,t)),n},g);const Z=Object.freeze({verb:"verb",adjective:"adjective"}),ee=Object.freeze({present:"Present",past:"Past",te:"て-form",adverb:"Adverb",volitional:"Volitional",passive:"Passive",causative:"Causative",potential:"Potential",imperative:"Imperative",causativePassive:"Causative-Passive"}),et=Object.freeze(["verbu","verbru","verbirregular","verbpresent","verbpast","verbte","verbaffirmative","verbnegative","verbplain","verbpolite","adjectivei","adjectivena","adjectiveirregular","adjectivepresent","adjectivepast","adjectiveadverb","adjectiveaffirmative","adjectivenegative","adjectiveplain","adjectivepolite","verbvolitional","verbpassive","verbcausative","verbpotential","verbimperative","verbcausativepassive"]);function en(e,t){ei(e,"display-none",t)}function er(e,t){ei(e,"background-none",t)}function ei(e,t,n){n?e.classList.add(t):e.classList.remove(t)}const ea=Object.freeze({always:"always",onlyAfterAnswering:"after"}),eo=function(){let e=new Set;return document.querySelectorAll("#non-conjugation-settings input").forEach(t=>e.add(t.getAttribute("name"))),e}(),eu=()=>{let e=document.getElementById("options-form").querySelectorAll('[type="checkbox"]'),t={};for(let n of Array.from(e))t[n.name]=!0;for(let e of Array.from(document.getElementById("options-form").querySelectorAll('.advanced-section [type="checkbox"]')))t[e.name]=!1;return t.translationTiming=ea.always,t.furiganaTiming=ea.always,t},es=()=>{let e={};for(let t of Array.from(document.getElementById("non-conjugation-settings").querySelectorAll('[type="checkbox"]')))e[t.name]=!0;for(let t of(e.translationTiming=ea.always,e.furiganaTiming=ea.always,Array.from(document.getElementById("conjugation-settings").querySelectorAll('[type="checkbox"]'))))e[t.name]=!1;return e};function ec(){for(let e of Array.from(document.getElementsByClassName("settings-error-text")))if(e.offsetWidth>0&&e.offsetHeight>0){document.getElementById("back-button").disabled=!0;return}document.getElementById("back-button").disabled=!1}function el(e,t,n){if(e){let e=document.getElementById("back-button");t.textContent=n,en(t,!1),e.disabled=!0}else en(t,!0),ec()}function ef(e,t,n,r){el(function(e,t){for(let n of Array.from(e))if(n.checked!==t)return!1;return!0}(e,r),t,n)}function ed(e){ef(e.getElementsByTagName("input"),e.getElementsByClassName("settings-error-text")[0],"*Must choose at least 1 option from this category",!1)}function ey(){let e=[document.querySelector('input[name="verb"]'),document.querySelector('input[name="adjective"]')];en(document.getElementById("verb-options-container"),!e[0].checked),en(document.getElementById("adjective-options-container"),!e[1].checked),ef(e,document.getElementById("top-must-choose"),"*Must choose at least 1 option from this category",!1)}function eg(e){let t=Array.from(document.getElementById(`${e}-conjugation-type-group`).getElementsByTagName("input")).concat(Array.from(document.getElementById(`${e}-variations-container`).getElementsByTagName("input"))),n=new Set([`${e}present`,`${e}affirmative`,`${e}plain`]);for(let e of t)if(!e.checked&&n.has(e.name)||e.checked&&!n.has(e.name))return!1;return!0}function ep(){let e=document.getElementById("verb-conjugation-type-group"),t=e.getElementsByClassName("settings-error-text")[0];eg(Z.verb)?(el(!0,t,"*Invalid combination: present, affirmative, plain"),ec()):ed(e)}function em(){let e=document.getElementById("adjective-type-group"),t=e.getElementsByClassName("settings-error-text")[0],n=document.querySelector('input[name="adjectivei"]'),r=document.querySelector('input[name="adjectiveirregular"]'),i=document.querySelector('input[name="adjectivena"]');eg(Z.adjective)&&!i.checked&&(n.checked||r.checked)?(el(!0,t,"*Invalid combination: い/irregular, present, affirmative, plain"),ec()):document.querySelector('input[name="adjective"]').checked&&ed(e)}function eh(e,t){let n=document.getElementsByClassName(e),r=document.getElementById(t),i=r.classList.contains("options-group")?[r]:r.getElementsByClassName("options-group");for(let e of Array.from(n))if(e.checked){for(let e of Array.from(i))ed(e),en(e,!1);return!0}for(let e of Array.from(i))en(e,!0);return!1}function ev(){eh("verb-has-variations","verb-variations-container")||eh("verb-has-politeness","verb-politeness-container")}function eb(){eh("adjective-has-variations","adjective-variations-container")}function ej(){en(document.getElementById("furigana-sub-options"),!document.getElementById("furigana-checkbox").checked)}function ek(){en(document.getElementById("translation-sub-options"),!document.getElementById("translation-checkbox").checked)}function eE(e){eS(e.emoji),eO(e.streak)}const ew={verbs:{verbpresent:function(e){return e.conjugation.type!==ee.present},verbpast:function(e){return e.conjugation.type!==ee.past},verbte:function(e){return e.conjugation.type!==ee.te},verbvolitional:function(e){return e.conjugation.type!==ee.volitional},verbpassive:function(e){return e.conjugation.type!==ee.passive},verbcausative:function(e){return e.conjugation.type!==ee.causative},verbpotential:function(e){return e.conjugation.type!==ee.potential},verbimperative:function(e){return e.conjugation.type!==ee.imperative},verbcausativepassive:function(e){return e.conjugation.type!==ee.causativePassive},verbaffirmative:function(e){return!0!==e.conjugation.affirmative},verbnegative:function(e){return!1!==e.conjugation.affirmative},verbplain:function(e){return!1!==e.conjugation.polite},verbpolite:function(e){return!0!==e.conjugation.polite},verbu:function(e){return"u"!=e.wordJSON.type},verbru:function(e){return"ru"!=e.wordJSON.type},verbirregular:function(e){return"irv"!=e.wordJSON.type}},adjectives:{adjectivepresent:function(e){return e.conjugation.type!==ee.present},adjectivepast:function(e){return e.conjugation.type!==ee.past},adjectiveadverb:function(e){return e.conjugation.type!==ee.adverb},adjectiveaffirmative:function(e){return!0!==e.conjugation.affirmative},adjectivenegative:function(e){return!1!==e.conjugation.affirmative},adjectiveplain:function(e){return!1!==e.conjugation.polite},adjectivepolite:function(e){return!0!==e.conjugation.polite},adjectivei:function(e){return"i"!=e.wordJSON.type},adjectivena:function(e){return"na"!=e.wordJSON.type},adjectiveirregular:function(e){return"ira"!=e.wordJSON.type}}};function eI(e){let t=1n,n=0n,r=function(e){let t;let n=(t=JSON.parse(JSON.stringify(e)),eo.forEach(e=>{delete t[e]}),t);function r(e){return Array.from(document.getElementsByClassName(e)).map(e=>e.getAttribute("name")).some(e=>n[e])}if(n.verb)r("verb-has-variations")||(delete n.verbaffirmative,delete n.verbnegative,r("verb-has-politeness")||(delete n.verbplain,delete n.verbpolite));else{let e=/^verb.+/;for(let t of Object.keys(n))e.test(t)&&delete n[t]}if(n.adjective)r("adjective-has-variations")||(delete n.adjectiveaffirmative,delete n.adjectivenegative,delete n.adjectiveplain,delete n.adjectivepolite);else{let e=/^adjective.+/;for(let t of Object.keys(n))e.test(t)&&delete n[t]}return n}(e);for(let e of et)r[e]&&(n|=t),t<<=1n;return n.toString()}const eS=function(e){document.getElementById("conjugation-inquery-text").className=e?"":"hide-emojis"},eO=function(e){document.querySelectorAll(".streak").forEach(t=>{e?t.classList.remove("display-none"):t.classList.add("display-none")})},eC=function(e,t=!1){eB(document.getElementById("verb-text"),e,"hide-furigana",t,"transparent-furigana")},ex=function(e,t=!1){eB(document.getElementById("translation"),e,"display-none",t,"transparent")};function eB(e,t,n,r,i){if(e.classList.remove(n),e.classList.remove(i),!t){e.classList.add(n);return}if(r){e.classList.add(i);return}}const eA="ontouchstart"in window||navigator.msMaxTouchPoints>0;document.getElementById("press-any-key-text").textContent=eA?"Tap to continue":"Press Enter/Return to continue";const eN=Object.freeze({question:0,results:1,settings:2});function eL(e){for(let t of Array.from(document.getElementById("verb-box").getElementsByTagName("p")))t.style.color=e}function e$(e){let t=function(e){let t=Math.random();try{for(let n=0;n<e.length;n++){if(t<e[n].probability)return e[n];t-=e[n].probability}throw"no random word chosen"}catch(t){return console.error(t),e[0]}}(e);return function(e){er(document.getElementById("verb-box"),!0);let t=e.wordJSON.kanji.replaceAll("<rt>",'<span class="rt">').replaceAll("</rt>","</span>");document.getElementById("verb-text").innerHTML=t,document.getElementById("translation").textContent=e.wordJSON.eng,document.getElementById("verb-type").textContent=" ",document.getElementById("conjugation-inquery-text").innerHTML=function(e){let t="";function n(e,t){return`<div class="conjugation-inquery"><div class="inquery-emoji">${t}</div><div class="inquery-text">${e}</div></div> `}return e.type===ee.past?t+=n(ee.past,"⌚"):e.type===ee.te||e.type===ee.adverb?t+=e.type:e.type===ee.volitional?t+=n(ee.volitional,"\uD83C\uDF7B"):e.type===ee.passive?t+=n(ee.passive,"\uD83E\uDDD8"):e.type===ee.causative?t+=n(ee.causative,"\uD83D\uDC69‍\uD83C\uDFEB"):e.type===ee.potential?t+=n(ee.potential,"‍\uD83C\uDFCB"):e.type===ee.imperative?t+=n(ee.imperative,"\uD83D\uDCE2"):e.type===ee.causativePassive&&(t+=n(ee.causativePassive,"\uD83D\uDE12")),!1===e.affirmative&&(t+=n("Negative","\uD83D\uDEAB")),!0===e.polite?t+=n("Polite","\uD83D\uDC54"):!1===e.polite&&(t+=n("Plain","\uD83D\uDC6A")),t}(e.conjugation)}(t),eL("rgb(232, 232, 232)"),t}function eJ(e,t,n,r){let i=r?"問":"と";if(n===ee.present){if(e&&t)return`${i}\u{3044}\u{307E}\u{3059}`;if(e&&!t)return`${i}\u{3046}`;if(!e&&t)return[`${i}\u{3044}\u{307E}\u{305B}\u{3093}`,`${i}\u{308F}\u{306A}\u{3044}\u{3067}\u{3059}`];if(!e&&!t)return`${i}\u{308F}\u{306A}\u{3044}`}else if(n===ee.past){if(e&&t)return`${i}\u{3044}\u{307E}\u{3057}\u{305F}`;if(e&&!t)return`${i}\u{3046}\u{305F}`;if(!e&&t)return[`${i}\u{3044}\u{307E}\u{305B}\u{3093}\u{3067}\u{3057}\u{305F}`,`${i}\u{308F}\u{306A}\u{304B}\u{3063}\u{305F}\u{3067}\u{3059}`];if(!e&&!t)return`${i}\u{308F}\u{306A}\u{304B}\u{3063}\u{305F}`}else if(n===ee.te)return`${i}\u{3046}\u{3066}`;else if(n===ee.volitional)return t?`${i}\u{3044}\u{307E}\u{3057}\u{3087}\u{3046}`:`${i}\u{304A}\u{3046}`;else if(n===ee.passive||n===ee.causative||n===ee.potential||n===ee.imperative||n===ee.causativePassive)return eU.verb[n](i+"う","u",e,t)}function eD(e,t,n,r){let i;if(n===ee.present?e&&t?i="きます":e&&!t?i="くる":!e&&t?i=["きません","こないです"]:e||t||(i="こない"):n===ee.past?e&&t?i="きました":e&&!t?i="きた":!e&&t?i=["きませんでした","こなかったです"]:e||t||(i="こなかった"):n===ee.te?i="きて":n===ee.volitional?i=t?"きましょう":"こよう":n===ee.passive||n===ee.causative||n===ee.potential||n===ee.causativePassive?i=eU.verb[n]("こる","ru",e,t):n===ee.imperative&&(i="こい"),r){if("string"==typeof i)i="来"+i.substring(1);else for(let e=0;e<i.length;e++)i[e]="来"+i[e].substring(1)}return i}function eT(e,t,n,r){let i=r?"行":"い";if(n===ee.present){if(e&&t)return`${i}\u{304D}\u{307E}\u{3059}`;if(e&&!t)return`${i}\u{304F}`;if(!e&&t)return[`${i}\u{304D}\u{307E}\u{305B}\u{3093}`,`${i}\u{304B}\u{306A}\u{3044}\u{3067}\u{3059}`];if(!e&&!t)return`${i}\u{304B}\u{306A}\u{3044}`}else if(n===ee.past){if(e&&t)return`${i}\u{304D}\u{307E}\u{3057}\u{305F}`;if(e&&!t)return`${i}\u{3063}\u{305F}`;if(!e&&t)return[`${i}\u{304D}\u{307E}\u{305B}\u{3093}\u{3067}\u{3057}\u{305F}`,`${i}\u{304B}\u{306A}\u{304B}\u{3063}\u{305F}\u{3067}\u{3059}`];if(!e&&!t)return`${i}\u{304B}\u{306A}\u{304B}\u{3063}\u{305F}`}else if(n===ee.te)return`${i}\u{3063}\u{3066}`;else if(n===ee.volitional)return t?`${i}\u{304D}\u{307E}\u{3057}\u{3087}\u{3046}`:`${i}\u{3053}\u{3046}`;else if(n===ee.passive||n===ee.causative||n===ee.potential||n===ee.imperative||n===ee.causativePassive)return eU.verb[n](i+"く","u",e,t)}function eM(e,t){for(let n=1;n<=t.length;n++)if(e[e.length-n]!=t[t.length-n])return!1;return e.replace(t,"")}function eq(e,t,n,r){let i,a;if(!1!==(i=eM(e,"いく"))?a=eT(t,n,r,!1):!1!==(i=eM(e,"行く"))?a=eT(t,n,r,!0):!1!==(i=eM(e,"する"))?a=function(e,t,n){if(n===ee.present){if(e&&t)return"します";if(e&&!t)return"する";if(!e&&t)return["しません","しないです"];if(!e&&!t)return"しない"}else if(n===ee.past){if(e&&t)return"しました";if(e&&!t)return"した";if(!e&&t)return["しませんでした","しなかったです"];if(!e&&!t)return"しなかった"}else if(n===ee.te)return"して";else if(n===ee.volitional)return t?"しましょう":"しよう";else if(n===ee.passive){if(e&&t)return"されます";if(e&&!t)return"される";if(!e&&t)return"されません";if(!e&&!t)return"されない"}else if(n===ee.causative){if(e&&t)return"させます";if(e&&!t)return"させる";if(!e&&t)return"させません";if(!e&&!t)return"させない"}else if(n===ee.causativePassive){if(e&&t)return"させられます";if(e&&!t)return"させられる";if(!e&&t)return"させられません";if(!e&&!t)return"させられない"}else if(n===ee.potential){if(e&&t)return["できます","出来ます"];if(e&&!t)return["できる","出来る"];if(!e&&t)return["できません","出来ません"];if(!e&&!t)return["できない","出来ない"]}else if(n===ee.imperative)return["しろ","せよ"]}(t,n,r):!1!==(i=eM(e,"くる"))?a=eD(t,n,r,!1):!1!==(i=eM(e,"来る"))?a=eD(t,n,r,!0):!1!==(i=eM(e,"ある"))?a=function(e,t,n){if(n==ee.present){if(e&&t)return"あります";if(e&&!t)return"ある";if(!e&&t)return["ありません","ないです"];if(!e&&!t)return"ない"}else if(n==ee.past){if(e&&t)return"ありました";if(e&&!t)return"あった";if(!e&&t)return["ありませんでした","なかったです"];if(!e&&!t)return"なかった"}else if(n==ee.te)return"あって";else if(n===ee.volitional)return t?"ありましょう":"あろう";else if(n===ee.passive||n===ee.causative||n===ee.imperative||n===ee.causativePassive)return eU.verb[n]("ある","u",e,t);else if(n===ee.potential){if(e&&t)return["ありえます","あり得ます"];if(e&&!t)return["ありえる","あり得る","ありうる"];if(!e&&t)return["ありえません","あり得ません"];if(!e&&!t)return["ありえない","あり得ない"]}}(t,n,r):!1!==(i=eM(e,"とう"))?a=eJ(t,n,r,!1):!1!==(i=eM(e,"問う"))&&(a=eJ(t,n,r,!0)),"string"==typeof a)return i+a;if(a&&a.constructor===Array){let e=[];for(let t=0;t<a.length;t++)e[t]=i+a[t];return e}return"Error"}function eR(e,t,n){if(n===ee.present){if(e&&t)return["いいです","良いです"];if(e&&!t)return["いい","良い"];if(!e&&t)return["よくないです","よくありません","良くないです","良くありません"];if(!e&&!t)return["よくない","良くない"]}else if(n===ee.past){if(e&&t)return["よかったです","良かったです"];if(e&&!t)return["よかった","良かった"];if(!e&&t)return["よくなかったです","よくありませんでした","良くなかったです","良くありませんでした"];if(!e&&!t)return["よくなかった","良くなかった"]}else if(n===ee.adverb)return["よく","良く"]}function eP(e,t,n,r){if("いい"==e)return eR(t,n,r);if("かっこいい"==e){let e=[].concat(eR(t,n,r));for(let t=0;t<e.length;t++)e[t]="かっこ"+e[t];return e}}function ez(e){return"う"===e?"わ":"く"===e?"か":"ぐ"===e?"が":"す"===e?"さ":"ず"===e?"ざ":"つ"===e?"た":"づ"===e?"だ":"ぬ"===e?"な":"ふ"===e?"は":"ぶ"===e?"ば":"ぷ"===e?"ぱ":"む"===e?"ま":"る"===e?"ら":void console.debug("Input was not う in changeUtoA, was "+e)}function eW(e){return"う"===e?"え":"く"===e?"け":"ぐ"===e?"げ":"す"===e?"せ":"ず"===e?"ぜ":"つ"===e?"て":"づ"===e?"で":"ぬ"===e?"ね":"ふ"===e?"へ":"ぶ"===e?"べ":"ぷ"===e?"ぺ":"む"===e?"め":"る"===e?"れ":void console.debug("Input was not う in changeUtoE, was "+e)}function eF(e,t){var n;return"u"==t?e.substring(0,e.length-1)+("う"==(n=e.charAt(e.length-1))?"い":"く"===n?"き":"ぐ"===n?"ぎ":"す"===n?"し":"ず"===n?"じ":"つ"===n?"ち":"づ"===n?"ぢ":"ぬ"===n?"に":"ふ"===n?"ひ":"ぶ"===n?"び":"ぷ"===n?"ぴ":"む"===n?"み":"る"===n?"り":void console.debug("Input was not う in changeUtoI, was "+n)):e.substring(0,e.length-1)}function eK(e,t){return"u"==t?e.substring(0,e.length-1)+ez(e.charAt(e.length-1))+"ない":e.substring(0,e.length-1)+"ない"}function eV(e){return e.substring(0,e.length-1)}const eU={[Z.verb]:{[ee.present]:function(e,t,n,r){return"irv"==t?eq(e,n,r,ee.present):n&&r?eF(e,t)+"ます":n&&!r?e:!n&&r?[eF(e,t)+"ません",eK(e,t)+"です"]:n||r?void 0:eK(e,t)},[ee.past]:function(e,t,n,r){if("irv"==t)return eq(e,n,r,ee.past);if(n&&r)return eF(e,t)+"ました";if(n&&!r&&"u"==t){var i;return eV(e)+("す"==(i=e.charAt(e.length-1))?"した":"く"==i?"いた":"ぐ"==i?"いだ":"む"==i||"ぶ"==i||"ぬ"==i?"んだ":"る"==i||"う"==i||"つ"==i?"った":void console.debug("Input was not real verb ending changeToPastPlain, was "+i))}if(n&&!r&&"ru"==t)return eF(e,t)+"た";if(!n&&r){let n=eV(eK(e,t))+"かった";return[eF(e,t)+"ませんでした",n+"です"]}if(!n&&!r)return eV(eK(e,t))+"かった"},[ee.te]:function(e,t){if("irv"==t)return eq(e,!1,!1,ee.te);if("u"==t){let t=e.charAt(e.length-1);if("う"==t||"つ"==t||"る"==t)return eV(e)+"って";if("む"==t||"ぶ"==t||"ぬ"==t)return eV(e)+"んで";if("く"==t)return eV(e)+"いて";if("ぐ"==t)return eV(e)+"いで";else if("す"==t)return eV(e)+"して"}else if("ru"==t)return eF(e,t)+"て"},[ee.volitional]:function(e,t,n,r){if("irv"===t)return eq(e,!1,r,ee.volitional);if(r)return eF(e,t)+"ましょう";if(!r){if("u"===t){var i;return eV(e)+("う"===(i=e.charAt(e.length-1))?"お":"く"===i?"こ":"ぐ"===i?"ご":"す"===i?"そ":"ず"===i?"ぞ":"つ"===i?"と":"づ"===i?"ど":"ぬ"===i?"の":"ふ"===i?"ほ":"ぶ"===i?"ぼ":"ぷ"===i?"ぽ":"む"===i?"も":"る"===i?"ろ":void console.debug("Input was not う in changeUtoO, was "+i))+"う"}if("ru"===t)return eF(e,t)+"よう"}},[ee.passive]:function(e,t,n,r){if("irv"===t)return eq(e,n,r,ee.passive);let i=eV(e)+ez(e.charAt(e.length-1));return n&&r?i+"れます":n&&!r?i+"れる":!n&&r?i+"れません":n||r?void 0:i+"れない"},[ee.causative]:function(e,t,n,r){let i;return"irv"===t?eq(e,n,r,ee.causative):("ru"===t?i=eV(e)+"さ":"u"===t&&(i=eV(e)+ez(e.charAt(e.length-1))),n&&r)?i+"せます":n&&!r?i+"せる":!n&&r?i+"せません":n||r?void 0:i+"せない"},[ee.potential]:function(e,t,n,r){if("irv"===t)return eq(e,n,r,ee.potential);let i=[];return("u"===t?i.push(eV(e)+eW(e.charAt(e.length-1))):"ru"===t&&(i.push(eV(e)+"られ"),i.push(eV(e)+"れ")),n&&r)?i.map(e=>e+"ます"):n&&!r?i.map(e=>e+"る"):!n&&r?i.map(e=>e+"ません"):n||r?void 0:i.map(e=>e+"ない")},[ee.imperative]:function(e,t){return"irv"===t?eq(e,null,null,ee.imperative):"ru"===t?[eV(e)+"ろ",eV(e)+"よ"]:"u"===t?eV(e)+eW(e.charAt(e.length-1)):void 0},[ee.causativePassive]:function(e,t,n,r){if("irv"===t)return eq(e,n,r,ee.causativePassive);let i=[];if("u"===t){let t=e.charAt(e.length-1),n=eV(e)+ez(t);"す"===t?i.push(n+"せられ"):(i.push(n+"せられ"),i.push(n+"され"))}else"ru"===t&&i.push(eV(e)+"させられ");return n&&r?i.map(e=>e+"ます"):n&&!r?i.map(e=>e+"る"):!n&&r?i.map(e=>e+"ません"):n||r?void 0:i.map(e=>e+"ない")}},[Z.adjective]:{[ee.present]:function(e,t,n,r){if("ira"==t)return eP(e,n,r,ee.present);if(n&&r)return e+"です";if(n&&!r&&"i"==t)return e;if(n&&!r&&"na"==t)return e+"だ";if(!n&&r&&"i"==t)return[eV(e)+"くないです",eV(e)+"くありません"];if(!n&&r&&"na"==t)return[e+"じゃないです",e+"ではないです",e+"じゃありません",e+"ではありません"];if(!n&&!r&&"i"==t)return eV(e)+"くない";else if(!n&&!r&&"na"==t)return[e+"じゃない",e+"ではない"]},[ee.past]:function(e,t,n,r){if("ira"==t)return eP(e,n,r,ee.past);if(n&&r&&"i"==t)return eV(e)+"かったです";if(n&&r&&"na"==t)return e+"でした";if(n&&!r&&"i"==t)return eV(e)+"かった";if(n&&!r&&"na"==t)return e+"だった";if(!n&&r&&"i"==t)return[eV(e)+"くなかったです",eV(e)+"くありませんでした"];if(!n&&r&&"na"==t)return[e+"じゃなかったです",e+"ではなかったです",e+"じゃありませんでした",e+"ではありませんでした"];else if(!n&&!r&&"i"==t)return eV(e)+"くなかった";else if(!n&&!r&&"na"==t)return[e+"じゃなかった",e+"ではなかった"]},[ee.adverb]:function(e,t){return"ira"==t?eP(e,!1,!1,ee.adverb):"i"==t?eV(e)+"く":"na"==t?e+"に":void 0}}};function eH(e){return e.replace(/<ruby>|<\/ruby>|<rt>.*?<\/rt>/g,"")}function eG(e){return e.replace(/<ruby>|<\/ruby>|.<rt>|<\/rt>/g,"")}function eQ(e,t,n,r,i,a){let o=[],u=eU[t][n];return r?.forEach(t=>{o.push(u(t,e.type,i,a))}),new eX(o.flat(),n,i,a)}class eX{constructor(e,t,n,r){this.validAnswers=e,this.type=t,this.affirmative=n,this.polite=r}}class e_{constructor(e,t){this.wordJSON=e,this.conjugation=t,this.probability=0,this.wasRecentlyIncorrect=!1}}class eY{constructor(e,t){this.word=e,this.wasCorrect=t}}function eZ(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n].probability;for(let n=0;n<e.length;n++)e[n].probability/=t}function e0(e,t){for(let n=0;n<e.length;n++)e[n].probability=t}class e3{constructor(e){this.score=e}}new class{constructor(e){let i=document.getElementById("main-text-input");(function(e={},i={},a=!1){if(!R.includes(e.nodeName))throw Error(`Element provided to Wanakana bind() was not a valid input or textarea element.
 Received: (${JSON.stringify(e)})`);let o=function(e){let i;let a=Object.assign({},p(e),{IMEMode:e.IMEMode||!0}),o=$(a.IMEMode,a.useObsoleteKana,a.customKanaMapping),u=[...Object.keys(o),...Object.keys(o).map(e=>e.toUpperCase())];return function({target:e}){e.value!==i&&"true"!==e.dataset.ignoreComposition&&function(e,i,a,o,u){let[c,l,f]=function(e="",t=0,n=[]){let r,i,a;return 0===t&&n.includes(e[0])?[r,i,a]=["",...T(e,e=>n.includes(e)||!s(e,/[0-9]/))]:t>0?[r,i,a]=function(e="",t=0){let[n,r]=T([...e.slice(0,t)].reverse(),e=>!s(e));return[r.reverse().join(""),n.split("").reverse().join(""),e.slice(t)]}(e,t):([r,i]=T(e,e=>!n.includes(e)),[i,a]=T(i,e=>!s(e))),[r,i,a]}(e.value,e.selectionEnd,o),d=function(e="",i={},a){let o;return a?o=i:a=$((o=p(i)).IMEMode,o.useObsoleteKana,o.customKanaMapping),(function(e="",t={},n){var r,i,a;let{IMEMode:o,useObsoleteKana:u,customKanaMapping:s}=t;return n||(n=$(o,u,s)),r=e.toLowerCase(),i=n,a=!o,function e(t,n){let r=t.charAt(0);return function t(n,r,i,o){if(!r)return a||1===Object.keys(n).length?n[""]?[[i,o,n[""]]]:[]:[[i,o,null]];if(1===Object.keys(n).length)return[[i,o,n[""]]].concat(e(r,o));let u=function(e,t){if(void 0!==e[t])return Object.assign({"":e[""]+t},e[t])}(n,r.charAt(0));return void 0===u?[[i,o,n[""]]].concat(e(r,o)):t(u,r.slice(1),i,o+1)}(Object.assign({"":r},i[r]),t.slice(1),n,n+1)}(r,0)})(e,o,a).map(i=>{let[a,u,s]=i;if(null===s)return e.slice(a);let c=o.IMEMode===r.HIRAGANA,l=o.IMEMode===r.KATAKANA||[...e.slice(a,u)].every(N);return c||!l?s:function(e=""){let r=[];return e.split("").forEach(e=>{if(L(e)||function(e=""){return!t(e)&&12539===e.charCodeAt(0)}(e))r.push(e);else if(function(e=""){return!t(e)&&(!!L(e)||n(e,12353,12438))}(e)){let t=String.fromCharCode(e.charCodeAt(0)+96);r.push(t)}else r.push(e)}),r.join("")}(s)}).join("")}(l,i,a);if(l!==d){let t=c.length+d.length,n=c+d+f;e.value=n,f.length?setTimeout(()=>e.setSelectionRange(t,t),1):e.setSelectionRange(t,t)}}(e,a,o,u)}}(i),u=z();e.setAttribute("data-wanakana-id",u),e.setAttribute("lang","ja"),e.setAttribute("autoCapitalize","none"),e.setAttribute("autoCorrect","off"),e.setAttribute("autoComplete","off"),e.setAttribute("spellCheck","false"),e.addEventListener("input",o),e.addEventListener("compositionupdate",D),e.addEventListener("compositionend",D),J=J.concat({id:u,inputHandler:o,compositionHandler:D}),!0===a&&q(e)})(i),this.initState(e),i.addEventListener("keydown",e=>this.inputKeyPress(e)),document.getElementById("options-button").addEventListener("click",e=>this.settingsButtonClicked(e)),document.getElementById("options-form").addEventListener("submit",e=>this.backButtonClicked(e)),document.getElementById("current-streak-text").addEventListener("animationend",e=>{document.getElementById("current-streak-text").classList.remove(e.animationName)}),document.getElementById("max-streak-text").addEventListener("animationend",e=>{document.getElementById("max-streak-text").classList.remove(e.animationName)}),document.getElementById("status-box").addEventListener("animationend",e=>{document.getElementById("status-box").classList.remove(e.animationName)}),document.getElementById("input-tooltip").addEventListener("animationend",e=>{document.getElementById("input-tooltip").classList.remove(e.animationName)}),document.addEventListener("keydown",this.onKeyDown.bind(this)),document.addEventListener("touchend",this.onTouchEnd.bind(this)),function(){for(let e of Array.from(document.getElementsByClassName("options-group")))e.addEventListener("click",e=>ed(e.currentTarget));let e=document.getElementsByClassName("verb-has-variations"),t=document.getElementsByClassName("verb-has-politeness");for(let n of Array.from(e).concat(Array.from(t)))n.addEventListener("click",ev);for(let e of Array.from(document.getElementsByClassName("adjective-has-variations")))e.addEventListener("click",eb);document.getElementById("furigana-checkbox").addEventListener("click",ej),document.getElementById("translation-checkbox").addEventListener("click",ek),document.getElementById("verbs-checkbox").addEventListener("click",ey),document.getElementById("adjectives-checkbox").addEventListener("click",ey);let n=document.getElementById("options-view");n.addEventListener("click",ep),n.addEventListener("click",em)}()}loadMainView(){this.state.activeScreen=eN.question,document.getElementById("main-view").classList.add("question-screen"),document.getElementById("main-view").classList.remove("results-screen"),document.getElementById("input-tooltip").classList.remove("tooltip-fade-animation"),en(document.getElementById("press-any-key-text"),!0),en(document.getElementById("status-box"),!0),this.state.currentStreak0OnReset&&(document.getElementById("current-streak-text").textContent="0",this.state.currentStreak0OnReset=!1),this.state.loadWordOnReset&&(this.state.currentWord=e$(this.state.currentWordList),this.state.loadWordOnReset=!1),eC(this.state.settings.furigana,this.state.settings.furiganaTiming===ea.onlyAfterAnswering),ex(this.state.settings.translation,this.state.settings.translationTiming===ea.onlyAfterAnswering);let e=document.getElementById("main-text-input");e.disabled=!1,e.value="",eA||e.focus()}onKeyDown(e){let t=e.keyCode?e.keyCode:e.which;this.state.activeScreen===eN.results&&"13"==t&&"options-button"!==document.activeElement.id&&this.loadMainView()}onTouchEnd(e){this.state.activeScreen===eN.results&&e.target!=document.getElementById("options-button")&&this.loadMainView()}inputKeyPress(e){if("13"==(e.keyCode?e.keyCode:e.which)){e.stopPropagation();let t=document.getElementById("main-text-input"),n=t.value;switch(n[n.length-1]){case"n":n=n.replace(/n$/,"ん");break;case"。":n=n.replace(/。$/,"")}if(s(n))document.getElementById("input-tooltip").classList.remove("tooltip-fade-animation");else{document.getElementById("input-tooltip").classList.add("tooltip-fade-animation");return}this.state.activeScreen=eN.results,document.getElementById("main-view").classList.remove("question-screen"),document.getElementById("main-view").classList.add("results-screen"),t.blur(),function(e,t){let n=document.getElementById("status-box");if(en(n,!1),e.conjugation.validAnswers.some(e=>e==t)){n.style.background="green";let r=function(e,t){let n=eH(e.wordJSON.kanji),r=eG(e.wordJSON.kanji);if(e.conjugation.type===ee.potential&&("ru"===e.wordJSON.type||"来る"===n)){let i=[];if(i.push(eV(n)+"れ"),"ru"===e.wordJSON.type?i.push(eV(r)+"れ"):"来る"===n&&i.push("これ"),i.some(e=>t.startsWith(e)))return"ら-omitted short form"}return null}(e,t);document.getElementById("status-text").innerHTML=`Correct${null!=r?'<span class="sub-conjugation-indicator">('+r+")</span>":""}<br>${t} \u{25CB}`}else{var r;document.getElementById("verb-box").style.background=function(e){switch(e){case"u":return"rgb(255, 125, 0)";case"ru":return"rgb(5, 80, 245)";case"irv":case"ira":return"gray";case"i":return"rgb(0, 180, 240)";case"na":return"rgb(143, 73, 40)"}}(e.wordJSON.type),er(document.getElementById("verb-box"),!1),eL("white"),document.getElementById("verb-type").textContent="u"==(r=e.wordJSON.type)?"う-verb":"ru"==r?"る-verb":"irv"==r||"ira"==r?"Irregular":"i"==r?"い-adjective":"na"==r?"な-adjective":void 0,n.style.background="rgb(218, 5, 5)",document.getElementById("status-text").innerHTML=(""==t?"_":t)+" ×<br>"+e.conjugation.validAnswers[0]+" ○"}}(this.state.currentWord,n),eC(this.state.settings.furigana,!1),ex(this.state.settings.translation,!1);let r=this.state.currentWord.conjugation.validAnswers.some(e=>e==n);(function(e,t,n,r){if(e.length<3){e0(e,1),n.probability=0,eZ(e);return}if(n.wordJSON.group){let t=n.conjugation,r=n.wordJSON.group;e.filter(e=>{let i=e.conjugation;return e.wordJSON.group===r&&e!==n&&i.type===t.type&&i.affirmative===t.affirmative&&i.polite===t.polite}).forEach(e=>{e.probability/=3})}if(t.length>=2){let n,r=t.shift(),i=function(e){let t=2;for(let n=0;n<e.length;n++)t=e[n].probability<t&&0!=e[n].probability?e[n].probability:t;return t}(e);r.wasCorrect&&!r.word.wasRecentlyIncorrect?n=.5*i:r.wasCorrect&&r.word.wasRecentlyIncorrect?(n=.85*i,r.word.wasRecentlyIncorrect=!1):r.wasCorrect||(n=10),r.word.probability=n}r||(n.wasRecentlyIncorrect=!0),t.push(new eY(n,r)),n.probability=0,eZ(e)})(this.state.currentWordList,this.state.wordsRecentlySeenQueue,this.state.currentWord,r),r?(function(e=1,t,n){if(0==e)return;let r=document.getElementById("max-streak-text"),i=document.getElementById("current-streak-text");if(parseInt(r.textContent)<=parseInt(i.textContent)){let i=parseInt(r.textContent)+e;r.textContent=i,document.getElementById("max-streak").classList.contains("display-none")||r.classList.add("grow-animation"),t[n].score=i,localStorage.setItem("maxScoreObjectsV2",JSON.stringify(t))}i.textContent=parseInt(i.textContent)+e,document.getElementById("current-streak").classList.contains("display-none")||i.classList.add("grow-animation")}(1,this.state.maxScoreObjects,this.state.maxScoreIndex),this.state.currentStreak0OnReset=!1):this.state.currentStreak0OnReset=!0,this.state.loadWordOnReset=!0,t.disabled=!0,en(document.getElementById("press-any-key-text"),!1),t.value=""}}settingsButtonClicked(e){this.state.activeScreen=eN.settings,function(e){for(let t of Array.from(document.querySelectorAll('#options-form input[type="checkbox"]')))t.checked=e[t.name];function t(e,t,n){switch(e){case ea.always:document.getElementById(t).checked=!0;break;case ea.onlyAfterAnswering:document.getElementById(n).checked=!0}}t(e.furiganaTiming,"furigana-always-radio","furigana-after-radio"),t(e.translationTiming,"translation-always-radio","translation-after-radio")}(this.state.settings),function(){for(let e of(ev(),eb(),ej(),ek(),Array.from(document.getElementsByClassName("options-group"))))ed(e);ey()}(),en(document.getElementById("main-view"),!0),en(document.getElementById("options-view"),!1),en(document.getElementById("donation-section"),!1)}backButtonClicked(e){e.preventDefault(),function(e){for(let t of Array.from(document.querySelectorAll('#options-form input[type="checkbox"]')))e[t.name]=t.checked;function t(e){return document.querySelector(`input[name="${e}"]:checked`)?.value??ea.always}e.furiganaTiming=t("furiganaTiming"),e.translationTiming=t("translationTiming")}(this.state.settings),localStorage.setItem("settings",JSON.stringify(this.state.settings));let t=eI(this.state.settings);null==this.state.maxScoreObjects[t]&&(this.state.maxScoreObjects[t]=new e3(0),localStorage.setItem("maxScoreObjectsV2",JSON.stringify(this.state.maxScoreObjects))),t!==this.state.maxScoreIndex?(this.state.maxScoreIndex=t,this.state.currentStreak0OnReset=!0,this.state.loadWordOnReset=!0,this.applySettingsUpdateWordList()):eE(this.state.settings),document.getElementById("max-streak-text").textContent=this.state.maxScoreObjects[this.state.maxScoreIndex].score,en(document.getElementById("main-view"),!1),en(document.getElementById("options-view"),!0),en(document.getElementById("donation-section"),!0),this.loadMainView()}initState(e){if(this.state={},this.state.completeWordList=function(e){let t={};for(let[n,r]of Object.entries(e)){t[n]=[];for(let e=0;e<r.length;e++){let i=function(e){let t=[],n="u"===e.type||"ru"===e.type||"irv"===e.type?Z.verb:"i"===e.type||"na"===e.type||"ira"===e.type?Z.adjective:void 0,r=[eG(e.kanji),eH(e.kanji)];e.altOkurigana?.length&&(r=r.concat(e.altOkurigana));let i=[ee.present,ee.past];return n===Z.verb&&(i.push(ee.passive),i.push(ee.causative),i.push(ee.causativePassive),"わかる"!==eG(e.kanji)&&i.push(ee.potential)),i.forEach(i=>{t.push(function(e,t,n,r){let i=[],a=!1,o=!1;for(let u=0;u<4;u++)u%2==0&&(a=!a),o=!o,(!a||o||n!==ee.present||"na"==e.type)&&i.push(eQ(e,t,n,r,a,o));return i}(e,n,i,r))}),n===Z.verb?(t.push(eQ(e,n,ee.te,r,null,null)),[!0,!1].forEach(i=>{t.push(eQ(e,n,ee.volitional,r,null,i))}),t.push(eQ(e,n,ee.imperative,r,null,null))):n===Z.adjective&&t.push(eQ(e,n,ee.adverb,r,null,null)),t.flat()}(r[e]);for(let a=0;a<i.length;a++)t[n].push(new e_(r[e],i[a]))}}return t}(e),localStorage.getItem("settings")&&(localStorage.getItem("maxScoreObjects")||localStorage.getItem("maxScoreObjectsV2"))){this.state.settings=Object.assign(es(),JSON.parse(localStorage.getItem("settings"))),this.state.maxScoreIndex=eI(this.state.settings);let e=localStorage.getItem("maxScoreObjects");if(null!=e){let t=function(e){let t={};for(let n of e){let e=eI(n.settings);null==t[e]&&(t[e]=new e3(0)),t[e].score<n.score&&(t[e].score=n.score)}return t}(JSON.parse(e));null==t[this.state.maxScoreIndex]&&(t[this.state.maxScoreIndex]=new e3(0)),this.state.maxScoreObjects=t,localStorage.setItem("maxScoreObjectsV2",JSON.stringify(this.state.maxScoreObjects)),localStorage.removeItem("maxScoreObjects"),localStorage.removeItem("maxScoreIndex")}else this.state.maxScoreObjects=JSON.parse(localStorage.getItem("maxScoreObjectsV2"))}else this.state.settings=eu(),localStorage.setItem("settings",JSON.stringify(this.state.settings)),this.state.maxScoreIndex=eI(this.state.settings),this.state.maxScoreObjects={},this.state.maxScoreObjects[this.state.maxScoreIndex]=new e3(0),localStorage.setItem("maxScoreObjectsV2",JSON.stringify(this.state.maxScoreObjects));this.applySettingsUpdateWordList(),this.state.currentWord=e$(this.state.currentWordList),this.state.wordsRecentlySeenQueue=[],this.state.currentStreak0OnReset=!1,this.state.loadWordOnReset=!1,document.getElementById("max-streak-text").textContent=this.state.maxScoreObjects[this.state.maxScoreIndex].score,this.loadMainView()}applySettingsUpdateWordList(){let e=function(e,t){eE(e);let n=[],r=/^verb.+/;if(!1!==e.verb){n=[...t.verbs];let i=Object.keys(e).filter(e=>r.test(e));for(let t=0;t<i.length;t++)!1===e[i[t]]&&(n=n.filter(ew.verbs[i[t]]))}let i=[],a=/^adjective.+/;if(!1!==e.adjective){i=[...t.adjectives];let n=Object.keys(e).filter(e=>a.test(e));for(let t=0;t<n.length;t++)!1===e[n[t]]&&(i=i.filter(ew.adjectives[n[t]]))}return n.concat(i)}(this.state.settings,this.state.completeWordList);e0(e,1),eZ(e),this.state.currentWordList=e}}({verbs:[{kanji:"<ruby>会<rt>あ</rt></ruby>う",type:"u",eng:"to meet; to see (a person) [Ch. 2]"},{kanji:"ある",type:"u",eng:"there is ... [Ch. 2]"},{kanji:"<ruby>行<rt>い</rt></ruby>く",type:"irv",eng:"to go [Ch. 3]",group:"iku"},{kanji:"いる",type:"ru",eng:"(a person) is in ... ; stays at ... [Ch. 2]"},{kanji:"<ruby>起<rt>お</rt></ruby>きる",type:"ru",eng:"to get up [Ch. 3]"},{kanji:"<ruby>泳<rt>およ</rt></ruby>ぐ",type:"u",eng:"to swim [Ch. 5]"},{kanji:"<ruby>買<rt>か</rt></ruby>う",type:"u",eng:"to buy [Ch. 3]"},{kanji:"<ruby>帰<rt>かえ</rt></ruby>る",type:"u",eng:"to go back; to return [Ch. 3]"},{kanji:"<ruby>書<rt>か</rt></ruby>く",type:"u",eng:"to write [Ch. 5]"},{kanji:"<ruby>聞<rt>き</rt></ruby>く",type:"u",eng:"to ask [Ch. 5]"},{kanji:"<ruby>聞<rt>き</rt></ruby>く",type:"u",eng:"to listen; to hear [Ch. 5]"},{kanji:"<ruby>来<rt>く</rt></ruby>る",type:"irv",eng:"to come [Ch. 3]"},{kanji:"する",type:"irv",eng:"to do [Ch. 2]",group:"suru"},{kanji:"<ruby>食<rt>た</rt></ruby>べる",type:"ru",eng:"to eat [Ch. 3]"},{kanji:"<ruby>出<rt>で</rt></ruby>かける",type:"ru",eng:"to go out [Ch. 4]"},{kanji:"<ruby>撮<rt>と</rt></ruby>る",type:"u",eng:"to take (a picture) [Ch. 5]"},{kanji:"<ruby>寝<rt>ね</rt></ruby>る",type:"ru",eng:"to sleep; to go to sleep [Ch. 3]"},{kanji:"<ruby>飲<rt>の</rt></ruby>む",type:"u",eng:"to drink [Ch. 3]"},{kanji:"<ruby>乗<rt>の</rt></ruby>る",type:"u",eng:"to ride; to board [Ch. 4]"},{kanji:"<ruby>話<rt>はな</rt></ruby>す",type:"u",eng:"to speak; to talk [Ch. 5]"},{kanji:"<ruby>勉強<rt>べんきょう</rt></ruby>する",type:"irv",eng:"to study [Ch. 3]"},{kanji:"<ruby>待<rt>ま</rt></ruby>つ",type:"u",eng:"to wait [Ch. 4]"},{kanji:"<ruby>見<rt>み</rt></ruby>る",type:"ru",eng:"to see; to look at; to watch [Ch. 3]"},{kanji:"やる",type:"u",eng:"to do; to perform [Ch. 6]"},{kanji:"<ruby>読<rt>よ</rt></ruby>む",type:"u",eng:"to read [Ch. 4]"},{kanji:"わかる",type:"u",eng:"to understand [Ch. 2]"},{kanji:"<ruby>遊<rt>あそ</rt></ruby>ぶ",type:"u",eng:"to play; to spend time pleasantly [Ch. 5]"},{kanji:"<ruby>歩<rt>ある</rt></ruby>く",type:"u",eng:"to walk [Ch. 5]"},{kanji:"<ruby>止<rt>と</rt></ruby>まる",type:"u",eng:"to stop (moving) [Ch. 6]"},{kanji:"<ruby>出<rt>だ</rt></ruby>す",type:"u",eng:"to take out; to hand in [Ch. 6]"}],adjectives:[{kanji:"おいしい",type:"i",eng:"delicious [Ch. 3]"},{kanji:"<ruby>高<rt>たか</rt></ruby>い",type:"i",eng:"expensive; high [Ch. 3]"},{kanji:"いい",type:"i",eng:"good [Ch. 3]"},{kanji:"<ruby>早<rt>はや</rt></ruby>い",type:"i",eng:"early [Ch. 3]"},{kanji:"<ruby>新<rt>あたら</rt></ruby>しい",type:"i",eng:"new [Ch. 5]"},{kanji:"<ruby>熱<rt>あつ</rt></ruby>い",type:"i",eng:"hot (thing) [Ch. 5]"},{kanji:"<ruby>暑<rt>あつ</rt></ruby>い",type:"i",eng:"hot (weather) [Ch. 5]"},{kanji:"<ruby>忙<rt>いそが</rt></ruby>しい",type:"i",eng:"busy (people/days) [Ch. 5]"},{kanji:"<ruby>大<rt>おお</rt></ruby>きい",type:"i",eng:"large [Ch. 3]"},{kanji:"<ruby>面白<rt>おもしろ</rt></ruby>い",type:"i",eng:"interesting; funny [Ch. 5]"},{kanji:"かっこいい",type:"i",eng:"good-looking [Ch. 5]"},{kanji:"<ruby>嫌い<rt>きらい</rt></ruby>",type:"na",eng:"disgusted with; to dislike [Ch. 5]"},{kanji:"きれい",type:"na",eng:"beautiful; clean [Ch. 3]"},{kanji:"<ruby>元気<rt>げんき</rt></ruby>",type:"na",eng:"healthy; energetic [Ch. 3]"},{kanji:"<ruby>怖<rt>こわ</rt></ruby>い",type:"i",eng:"frightening [Ch. 5]"},{kanji:"<ruby>寒<rt>さむ</rt></ruby>い",type:"i",eng:"cold (weather) [Ch. 5]"},{kanji:"<ruby>静<rt>しず</rt></ruby>か",type:"na",eng:"quiet [Ch. 5]"},{kanji:"<ruby>好き<rt>すき</rt></ruby>",type:"na",eng:"fond of; to like [Ch. 5]"},{kanji:"<ruby>大嫌い<rt>だいきらい</rt></ruby>",type:"na",eng:"to hate [Ch. 5]"},{kanji:"<ruby>大好き<rt>だいすき</rt></ruby>",type:"na",eng:"very fond of; to love [Ch. 5]"},{kanji:"<ruby>楽<rt>たの</rt></ruby>しい",type:"i",eng:"fun [Ch. 5]"},{kanji:"<ruby>小<rt>ちい</rt></ruby>さい",type:"i",eng:"small [Ch. 3]"},{kanji:"つまらない",type:"i",eng:"boring [Ch. 5]"},{kanji:"にぎやか",type:"na",eng:"lively [Ch. 5]"},{kanji:"<ruby>暇<rt>ひま</rt></ruby>",type:"na",eng:"not busy; free (time) [Ch. 5]"},{kanji:"<ruby>古<rt>ふる</rt></ruby>い",type:"i",eng:"old (thing) [Ch. 5]"},{kanji:"<ruby>難<rt>むずか</rt></ruby>しい",type:"i",eng:"difficult [Ch. 5]"},{kanji:"やさしい",type:"i",eng:"easy (problem); kind (person) [Ch. 5]"},{kanji:"<ruby>安<rt>やす</rt></ruby>い",type:"i",eng:"inexpensive; cheap (thing) [Ch. 5]"},{kanji:"<ruby>速<rt>はや</rt></ruby>い",type:"i",eng:"fast [Ch. 6]"},{kanji:"<ruby>大<rt>おお</rt></ruby>きい",type:"i",eng:"big; large [Ch. 6]"}]}),en(document.getElementById("toppest-container"),!1),eA||document.getElementById("main-text-input").focus();